<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>打字游戏</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        h1 {
            margin-bottom: 20px;
        }
        
        .game-info {
            display: flex;
            gap: 30px;
            margin-bottom: 20px;
            font-size: 18px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
        }
        
        .text-display {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            font-size: 18px;
            line-height: 1.6;
            max-width: 600px;
            margin: 20px 0;
            text-align: center;
        }
        
        .current-word {
            background: #3498db;
            color: white;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .correct {
            background: #2ecc71;
            color: white;
        }
        
        .incorrect {
            background: #e74c3c;
            color: white;
        }
        
        .input-area {
            margin: 20px 0;
        }
        
        input[type="text"] {
            padding: 15px;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            width: 400px;
            text-align: center;
            font-family: 'Courier New', monospace;
        }
        
        input[type="text"]:focus {
            outline: 3px solid #3498db;
        }
        
        .controls {
            margin: 20px 0;
            text-align: center;
        }
        
        button {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        button:hover {
            background: #c0392b;
        }
        
        .difficulty {
            margin: 10px 0;
        }
        
        select {
            padding: 5px 10px;
            font-size: 16px;
            border-radius: 5px;
            border: none;
        }
        
        .stats {
            margin-top: 20px;
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <h1>⌨️ 打字游戏</h1>
    
    <div class="game-info">
        <div>WPM: <span id="wpm">0</span></div>
        <div>准确率: <span id="accuracy">100%</span></div>
        <div>时间: <span id="time">60</span>秒</div>
    </div>
    
    <div class="difficulty">
        难度: 
        <select id="difficulty">
            <option value="easy">简单 (60秒)</option>
            <option value="medium" selected>中等 (60秒)</option>
            <option value="hard">困难 (60秒)</option>
        </select>
    </div>
    
    <div class="text-display" id="textDisplay">点击开始游戏</div>
    
    <div class="input-area">
        <input type="text" id="textInput" placeholder="在此输入..." disabled>
    </div>
    
    <div class="controls">
        <button onclick="startGame()">开始游戏</button>
        <button onclick="resetGame()">重置</button>
    </div>
    
    <div class="stats">
        <div class="game-info">
            <div>总字符: <span id="totalChars">0</span></div>
            <div>正确字符: <span id="correctChars">0</span></div>
            <div>错误字符: <span id="errorChars">0</span></div>
        </div>
    </div>

    <script>
        let gameStarted = false;
        let gameEnded = false;
        let startTime = 0;
        let gameTimer;
        let timeLeft = 60;
        let currentText = '';
        let currentIndex = 0;
        let correctChars = 0;
        let totalChars = 0;
        let errors = 0;
        
        const wpmElement = document.getElementById('wpm');
        const accuracyElement = document.getElementById('accuracy');
        const timeElement = document.getElementById('time');
        const textDisplayElement = document.getElementById('textDisplay');
        const textInputElement = document.getElementById('textInput');
        const difficultySelect = document.getElementById('difficulty');
        const totalCharsElement = document.getElementById('totalChars');
        const correctCharsElement = document.getElementById('correctChars');
        const errorCharsElement = document.getElementById('errorChars');
        
        const texts = {
            easy: [
                '今天天气很好。我喜欢在公园里散步。',
                '学习是一件快乐的事情。我们应该珍惜时间。',
                '书籍是人类进步的阶梯。阅读可以开阔视野。',
                '友谊是生命中的珍宝。我们要善待朋友。',
                '运动有益身体健康。每天都要运动。'
            ],
            medium: [
                '互联网技术改变了我们的生活方式，从沟通交流到工作学习，无处不在。',
                '人工智能的发展为人类带来了巨大的机遇，同时也提出了一些挑战。',
                '环境保护是每个人的责任，我们应该从小事做起，保护我们的地球。',
                '创新思维是推动社会进步的重要力量，我们要不断学习和探索。',
                '教育是一个国家发展的根本，投资教育就是投资未来。'
            ],
            hard: [
                '量子计算机的出现可能会彻底改变计算机科学的面貌，它利用量子力学的特性来处理信息。',
                '区块链技术作为一种分布式账本技术，具有去中心化、不可篡改、透明化等特点。',
                '机器学习和深度学习在计算机视觉、自然语言处理等领域取得了显著的进展。',
                '生物信息学是一门交叉学科，结合了生物学、计算机科学和数学等多个领域的知识。',
                '纳米技术的发展为医学、材料科学、电子工程等领域带来了革命性的变化。'
            ]
        };
        
        function getRandomText() {
            const difficulty = difficultySelect.value;
            const textArray = texts[difficulty];
            return textArray[Math.floor(Math.random() * textArray.length)];
        }
        
        function displayText() {
            textDisplayElement.innerHTML = '';
            
            for (let i = 0; i < currentText.length; i++) {
                const span = document.createElement('span');
                span.textContent = currentText[i];
                
                if (i < currentIndex) {
                    span.className = 'correct';
                } else if (i === currentIndex) {
                    span.className = 'current-word';
                }
                
                textDisplayElement.appendChild(span);
            }
        }
        
        function updateStats() {
            totalCharsElement.textContent = totalChars;
            correctCharsElement.textContent = correctChars;
            errorCharsElement.textContent = errors;
            
            const accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;
            accuracyElement.textContent = accuracy + '%';
            
            if (gameStarted && !gameEnded) {
                const timeElapsed = (Date.now() - startTime) / 1000 / 60; // 分钟
                const wpm = timeElapsed > 0 ? Math.round(correctChars / 5 / timeElapsed) : 0;
                wpmElement.textContent = wpm;
            }
        }
        
        function updateTimer() {
            timeLeft--;
            timeElement.textContent = timeLeft;
            
            if (timeLeft <= 0) {
                endGame();
            }
        }
        
        function startGame() {
            gameStarted = true;
            gameEnded = false;
            startTime = Date.now();
            timeLeft = 60;
            currentIndex = 0;
            correctChars = 0;
            totalChars = 0;
            errors = 0;
            
            currentText = getRandomText();
            displayText();
            
            textInputElement.disabled = false;
            textInputElement.focus();
            textInputElement.value = '';
            
            gameTimer = setInterval(updateTimer, 1000);
            updateStats();
        }
        
        function endGame() {
            gameStarted = false;
            gameEnded = true;
            clearInterval(gameTimer);
            
            textInputElement.disabled = true;
            
            const finalWpm = Math.round(correctChars / 5 / (60 / 60));
            const finalAccuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;
            
            setTimeout(() => {
                alert(`游戏结束！\nWPM: ${finalWpm}\n准确率: ${finalAccuracy}%\n正确字符: ${correctChars}\n错误字符: ${errors}`);
            }, 100);
        }
        
        function resetGame() {
            gameStarted = false;
            gameEnded = false;
            clearInterval(gameTimer);
            
            timeLeft = 60;
            currentIndex = 0;
            correctChars = 0;
            totalChars = 0;
            errors = 0;
            
            timeElement.textContent = timeLeft;
            wpmElement.textContent = '0';
            accuracyElement.textContent = '100%';
            
            textDisplayElement.textContent = '点击开始游戏';
            textInputElement.value = '';
            textInputElement.disabled = true;
            
            updateStats();
        }
        
        // 输入事件监听
        textInputElement.addEventListener('input', (e) => {
            if (!gameStarted || gameEnded) return;
            
            const inputValue = e.target.value;
            const currentChar = currentText[currentIndex];
            
            if (inputValue.length > 0) {
                const inputChar = inputValue[inputValue.length - 1];
                totalChars++;
                
                if (inputChar === currentChar) {
                    correctChars++;
                    currentIndex++;
                    
                    // 清空输入框
                    e.target.value = '';
                    
                    // 检查是否完成
                    if (currentIndex >= currentText.length) {
                        endGame();
                        return;
                    }
                } else {
                    errors++;
                    // 清空输入框
                    e.target.value = '';
                }
                
                displayText();
                updateStats();
            }
        });
        
        // 初始化
        resetGame();
    </script>
</body>
</html>